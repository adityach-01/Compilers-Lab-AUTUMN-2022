# Compilers-Lab-AUTUMN-2022

This is the repository for the `CS39003 - Compiler Laboratory` under the Department of Computer Science and Engineering for the Autumn Semester 2022-2023.

This repository contains six assignments. Assignment 3 to 6 constitute the project "tinyC compiler". tinyC is the subset of c.

All the code in this repository is written by [me](http://github.com/rsh-raj/) or my [partner](http://github.com/adityach-01/) for the assignments.   

The steps for running each individual assignment are in the respective folders.

# Assignment 1: Annotating Assembly Code
The annotated assembly code is in the file "ass1_20CS30040.s".

# Assignment 2: Creating Library

In this assignment we have to make a library which can perform the following functions  
- int printStr(char *)
- int readInt(int *)
- int printInt(int)
- int readFloat(float *)
- int printFloat(float)

Run the following command to compile the library and get an executable and then to test the library
    
        $ make
        $ ./a.out 
Run the following command to clean the directory
        
        $ make clean

#### **Files and their description**

ass2_20CS30040.c: This is the file which contains the functions which are to be implemented in the library.   

test.c: This is the test file, it demonstrates the use of the library functions by printing and reading the values of int, float and string.

myl.h : This is the header file which contains the function declarations of the functions to be implemented in the library.

makefile: This is the makefile which contains the commands to compile the library and the main file and to run the program at once and to clean the generated files.

# Assignment 3: Lexer for tinyC
In this assignment we have to build a Lexer using flex for a subset of C language called tinyC. The grammar for tinyC is given in the problem statement of the Assignment. The input to the lexer is a file containing the tinyC code. The output of the lexer is a file containing the tokens generated by the lexer. The tokens are generated in the form of a list of tuples. Each tuple contains the token name and the lexeme. The tokens are generated in the order in which they appear in the input file.

#### **Running the code**

The code is written in C and uses flex for lexical analysis. The code is compiled using g compiler. The code can be run using the following commands:

```bash
$ make
```
Result is written in output.txt
To clean the directory of all the generated files:
```bash
$ make clean
```
#### **Files and their description**

ass3_20CS10005_20CS30040.l: This is the file which contains the code for the lexer. It contains the regular expressions for the tokens and the code for the actions to be performed on the tokens.

ass3_20CS10005_20CS30040.c: This is the file which contains the main function. It contains the code for the driver program which calls the lexer and generates the tokens.

head.h: This is the header file which contains the function declarations of the functions used in the lexer.

ass3_20CS10005_20CS30040_test.c: This is the file which contains the test cases for the lexer. It contains the tinyC code for which the tokens are to be generated.


# Assignment 4: Parser for tinyC
This assignment involves writing the bison specification for defining the tokens of tinyC. 
#### **Running the code**

The code is written in C and uses flex for lexical analysis and bison for specifying phase structure grammar. The code is compiled using g compiler. The code can be run using the following commands:

```bash
$ make
```
Result is written in output.txt
To clean the directory of all the generated files:
```bash
$ make clean
```
#### **Files and their description**
Asgn4_20CS10005_20CS30040.y: contains the required bison specification

Asgn4_20CS10005_20CS30040.l: contains the lexer from previous assignment

Asgn4_20CS10005_20CS30040.c: main file to test the lexer and parser

Asgn4_20CS10005_20CS30040_test.c: test input file to test all the rules written


# Assignment 5: Machine Independent code generator for tinyC
This assignment involves writing a 3-Address Code(TAC quad array with the supporting symbol table and other auxiliary data structure) translator based on on the Flex and Bison specifications of tinyC. 

#### **Running the code**

```bash
$ make
```
Result is written in output<test_num>.txt in the output subdirectory.

To clean the directory of all the generated files:
```bash
$ make clean
```
#### **Files and their description**
lex2.l: contains the lexer from assign3

bison2.y: contains the bison specification from previous assignment

translator.cxx and translator.h: contains the code for translator

test/: subdirectory containing the test files

output/: subdirectory containing the result of test files
# Assignment 6: Target code(x86-64) code generator for tinyC
This assignment involves writing a translator which will generate target code x86-64 architecture from 3-Address quad's generated in the previous assignment
#### **Running the code**

```bash
$ make
```
Result is written in <test_file_name><test_num>quads1.out and <test_file_name><test_num>.s.

Use this command to test the correctness of generated assembly files(gcc will be invoked to convert the assembly files to executables).
```bash
$ make run
```
To clean the directory of all the generated files:
```bash
$ make clean
```
#### **Files and their description**
ass2_20CS10005.c: contains the library for I/O (more details in assign2) 

ass6_20CS1005.l: contains the lexer from assign3

ass6_20CS10005.y: contains the bison specification from assign4

ass6_20CS1005_translator.cxx and translator.h: contains the code for translator

ass6_20CS10005_target_translator.cxx: contain the code for translating the 3-Address code to target code

.\*test.\* contains the test files
